<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Census Report</title>
    <!--DO NOT FORGET THIS SCRIPT TAG SO YOU CAN USE JQUERY!!!!!-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!--YOUR OWN JAVASCRIPT CAN GO RIGHT HERE-->
    <script type="text/javascript">

        var zip = "";
        var url = "https://www.google.com/maps/embed/v1/place?key=AIzaSyBD-_cAjEeERk8wlcnRSeHcQai-AkeyXf4&q=85282";

        function search(zipCode) {
            var webMethod = "ProjectServices.asmx/SearchRequest";
            var parameters = "{\"zip\":\"" + encodeURI(zipCode) + "\"}";

            //jQuery ajax method
            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    //window.location.href = "./result_page.html";
                    //alert(JSON.parse(msg))
                    alert(JSON.parse(msg.d));
                },
                // server replied false, cannot validate

                error: function (e) {
                    alert("this code will only execute if javascript is unable to access the webservice");
                }
            });
        }

        function mapSearch(zip) {
            document.getElementById("map_frame").src = "https://www.google.com/maps/embed/v1/place?key=AIzaSyBD-_cAjEeERk8wlcnRSeHcQai-AkeyXf4&q=" + zip;
        }

        function onload() {
            document.getElementById("map_frame").src = "https://www.google.com/maps/embed/v1/place?key=AIzaSyBD-_cAjEeERk8wlcnRSeHcQai-AkeyXf4&q=85282";
        }

        

    </script>
    <!--END OF YOUR OWN JAVASCRIPT-->
    <style>
        .header {
            padding: 1px;
            text-align: left;
            background: #1abc9c;
            color: navajowhite;
            font-size: 15px;
        }

        body, html {
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }

        * {
            box-sizing: border-box;
        }

        /* Add styles to the form container */
        .container {
            position: absolute;
            left: 20px;
            margin: 20px;
            max-width: 300px;
            padding: 16px;
            background-color: lightgrey;
        }

        .google-map {
            position: absolute;
            right: 40px;
            margin: 20px;
            height: 400px;
            width: 400px;
            padding: 16px;
            background-color: lightblue;
            border: 3px solid #73AD21;
        }

        .graph {
            position: absolute;
            right: 450px;
            margin: 20px;
            height: 400px;
            width: 400px;
            padding: 16px;
            background-color: lightyellow;
            border: 3px solid #73AD21;
        }

        /* Full-width input fields */
        input[type=text] {
            width: 100%;
            padding: 15px;
            margin: 5px 0 22px 0;
            border: none;
            background: #f1f1f1;
        }

            input[type=text]:focus {
                background-color: #ddd;
                outline: none;
            }

        /* Set a style for the submit button */
        .btn {
            background-color: #4CAF50;
            color: white;
            padding: 16px 20px;
            border: none;
            cursor: pointer;
            width: 100%;
            opacity: 0.9;
        }

            .btn:hover {
                opacity: 1;
            }
    </style>
</head>

<body onload="onload()">
    <header class="header">
        <div>
            <h1>Census Data</h1>
        </div>
    </header>

    <form action="/action_page.php" class="container" onsubmit="search($('#zipCode').val()) & mapSearch($('#zipCode').val()); return false;" >
        <h1>Search Here</h1>

        <label for="zip"><b>Zip Code Search</b></label>
        <input type="text" placeholder="Enter Zipcodes (default ex: 85282)" name="zip" id="zipCode" required>
        <button type="submit" class="btn">Search</button>
    </form>

    <div class="google-map" id="mapDiv">
        <h1>Maps</h1>
        <iframe 
                id="map_frame"
                allowfullscreen>
        </iframe>
    </div>

    <div class="graph">
        <h1>Graph</h1>
        
    </div>

</body>
</html>